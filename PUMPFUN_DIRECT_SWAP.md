# Pump.fun Direct Swap Integration

## üöÄ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

–ü–µ—Ä–µ–∫–ª—é—á–∏–ª–∏—Å—å —Å Jupiter API –Ω–∞ **–ø—Ä—è–º—ã–µ —Å–≤–∞–ø—ã —á–µ—Ä–µ–∑ Pump.fun bonding curve**.

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. **–ë—ã—Å—Ç—Ä–µ–µ** - –Ω–µ—Ç –ø–æ—Å—Ä–µ–¥–Ω–∏–∫–æ–≤, –ø—Ä—è–º–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å bonding curve
2. **–ù–µ–∑–∞–º–µ—Ç–Ω–µ–µ** - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—É–±–ª–∏—á–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç–æ—Ä—ã
3. **–î–µ—à–µ–≤–ª–µ** - –º–µ–Ω—å—à–µ –∫–æ–º–∏—Å—Å–∏–π
4. **–ü—Ä–æ—â–µ** - –Ω–µ –Ω—É–∂–µ–Ω API –∫–ª—é—á
5. **–ù–∞–¥–µ–∂–Ω–µ–µ** - –Ω–µ –∑–∞–≤–∏—Å–∏–º –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

## üì¶ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã

### `src/pumpfun-swap.ts`
–ö–ª–∞—Å—Å –¥–ª—è –ø—Ä—è–º—ã—Ö —Å–≤–∞–ø–æ–≤ —á–µ—Ä–µ–∑ Pump.fun:
- `buy(wallet, tokenMint, amountSol)` - –ø–æ–∫—É–ø–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –∑–∞ SOL
- `sell(wallet, tokenMint, amountTokens)` - –ø—Ä–æ–¥–∞–∂–∞ —Ç–æ–∫–µ–Ω–æ–≤ –∑–∞ SOL
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ ATA (Associated Token Account)
- Slippage protection

## üîß –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### `src/real-trading-adapter.ts`
- –ó–∞–º–µ–Ω–µ–Ω `JupiterSwap` –Ω–∞ `PumpFunSwap`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã `executeBuy` –∏ `executeSell`
- –£–ª—É—á—à–µ–Ω `getTokenBalance`

### `test-real-trading.ts`
- –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Pump.fun —Ç–æ–∫–µ–Ω–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ mint address
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
User Wallet
    ‚Üì
RealTradingAdapter
    ‚Üì
PumpFunSwap
    ‚Üì
Pump.fun Bonding Curve (on-chain)
```

## üí° –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç?

### Buy (SOL ‚Üí Token)
1. –í—ã—á–∏—Å–ª—è–µ–º bonding curve PDA
2. –°–æ–∑–¥–∞–µ–º ATA –¥–ª—è —Ç–æ–∫–µ–Ω–∞ (–µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
3. –°–æ–∑–¥–∞–µ–º buy –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é —Å slippage protection
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é

### Sell (Token ‚Üí SOL)
1. –í—ã—á–∏—Å–ª—è–µ–º bonding curve PDA
2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–ª–∞–Ω—Å —Ç–æ–∫–µ–Ω–æ–≤
3. –°–æ–∑–¥–∞–µ–º sell –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
5. SOL –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–∞ –∫–æ—à–µ–ª–µ–∫

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ù–∞–π–¥–∏—Ç–µ –∞–∫—Ç–∏–≤–Ω—ã–π pump.fun —Ç–æ–∫–µ–Ω:**
   - –ü–æ—Å–µ—Ç–∏—Ç–µ https://pump.fun
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ç–æ–∫–µ–Ω —Å –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å—é (bonding curve –∞–∫—Ç–∏–≤–Ω–∞)
   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ mint address

2. **–û–±–Ω–æ–≤–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç:**
```typescript
const TEST_TOKEN = '–≤–∞—à_pump_fun_mint_address';
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:**
```bash
npx ts-node test-real-trading.ts
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ!

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–ª—å–∫–æ pump.fun —Ç–æ–∫–µ–Ω—ã** - —Ç–æ–∫–µ–Ω—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–∞ bonding curve
2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å** - —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤ bonding curve –µ—Å—Ç—å SOL
3. **–ú–∞–ª—ã–µ —Å—É–º–º—ã –¥–ª—è —Ç–µ—Å—Ç–æ–≤** - –Ω–∞—á–Ω–∏—Ç–µ —Å 0.001 SOL
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ https://solscan.io

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

| –ú–µ—Ç–æ–¥ | –°–∫–æ—Ä–æ—Å—Ç—å | –ó–∞–º–µ—Ç–Ω–æ—Å—Ç—å | API Key |
|-------|----------|------------|---------|
| Jupiter | ~3-5s | –í—ã—Å–æ–∫–∞—è | –¢—Ä–µ–±—É–µ—Ç—Å—è |
| Pump.fun Direct | ~1-2s | –ù–∏–∑–∫–∞—è | –ù–µ –Ω—É–∂–µ–Ω |

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å & –°–∫–æ—Ä–æ—Å—Ç—å

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–¥–ø–∏—Å–∞–Ω–∏–µ ‚ö°
- **–í—Å–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** - –±–µ–∑ –∑–∞–¥–µ—Ä–∂–µ–∫
- `skipPreflight: true` - –ø—Ä–æ–ø—É—Å–∫–∞–µ–º —Å–∏–º—É–ª—è—Ü–∏—é –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç–∏
- `maxRetries: 3` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä—è–µ–º –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ—à–∏–±–∫–∞—Ö
- –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ ATA (`ensureTokenAccount`) - –∏–∑–±–µ–≥–∞–µ–º –∑–∞–¥–µ—Ä–∂–µ–∫

### –ó–∞—â–∏—Ç–∞
- Slippage protection –Ω–∞ buy (5%)
- Slippage protection –Ω–∞ sell (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –ø–µ—Ä–µ–¥ sell
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π ('confirmed')

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- `prepareTokenAccount()` - —Å–æ–∑–¥–∞–µ—Ç ATA –∑–∞—Ä–∞–Ω–µ–µ
- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: ~1-2s

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–µ–∞–ª—å–Ω—ã–º pump.fun —Ç–æ–∫–µ–Ω–æ–º
2. –ó–∞–º–µ—Ä–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å buy/sell
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–∏—Å—Å–∏–∏
4. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω—É—é —Ç–æ—Ä–≥–æ–≤—É—é –ª–æ–≥–∏–∫—É
5. –î–æ–±–∞–≤–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫

## üÜò Troubleshooting

### –û—à–∏–±–∫–∞: "Account not found"
- Bonding curve –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–æ–∫–µ–Ω –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ —Ç–æ—Ä–≥—É–µ—Ç—Å—è –Ω–∞ pump.fun

### –û—à–∏–±–∫–∞: "Insufficient funds"
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ SOL –Ω–∞ –∫–æ—à–µ–ª—å–∫–µ
- –ü–æ–ø–æ–ª–Ω–∏—Ç–µ –∫–æ—à–µ–ª–µ–∫

### –û—à–∏–±–∫–∞: "Slippage exceeded"
- –¶–µ–Ω–∞ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å —Å–∏–ª—å–Ω–æ
- –£–≤–µ–ª–∏—á—å—Ç–µ slippage –≤ `createBuyInstruction`

## üìö –†–µ—Å—É—Ä—Å—ã

- Pump.fun: https://pump.fun
- Solscan Explorer: https://solscan.io
- Bonding Curve PDA: `findProgramAddress(['bonding-curve', mint])`

